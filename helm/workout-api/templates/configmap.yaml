apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "workout-api.fullname" . }}-config
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "workout-api.labels" . | nindent 4 }}
  annotations:
    # ArgoCD sync wave - deploy before Deployment
    argocd.argoproj.io/sync-wave: "1"
data:
  # Django configuration
  DEBUG: {{ .Values.config.django.debug | quote }}
  ALLOWED_HOSTS: {{ .Values.config.django.allowedHosts | quote }}

  # PostgreSQL configuration
  POSTGRES_HOST: {{ .Values.config.postgres.host | quote }}
  POSTGRES_PORT: {{ .Values.config.postgres.port | quote }}
  POSTGRES_DB: {{ .Values.config.postgres.database | quote }}
  POSTGRES_USER: {{ .Values.config.postgres.username | quote }}

  # CORS configuration
  CORS_ALLOWED_ORIGINS: {{ .Values.config.cors.allowedOrigins | quote }}
